{% extends 'base.html' %}
{% block title %}–ú–æ–∏ —Ä–∞—Å—Å—ã–ª–∫–∏{% endblock %}
{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>–ú–æ–∏ —Ä–∞—Å—Å—ã–ª–∫–∏</h2>
        <a href="{% url 'mailings:mailing_create' %}" class="btn btn-success">–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É</a>
    </div>

    {% if mailings %}
    <table class="table table-striped align-middle">
        <thead class="table-primary">
        <tr>
            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
            <th>–ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–ù–∞—á–∞–ª–æ</th>
            <th>–û–∫–æ–Ω—á–∞–Ω–∏–µ</th>
            <th class="text-end">–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
        </thead>
        <tbody>
        {% for mailing in mailings %}
        <tr>
            <td>{{ mailing.name }}</td>
            <td>{{ mailing.get_periodicity_display }}</td>
            <td>{{ mailing.get_status_display }}</td>
            <td>{{ mailing.date_first_dispatch|date:"d.m.Y H:i" }}</td>
            <td>{{ mailing.dispatch_end_date|date:"d.m.Y H:i" }}</td>
            <td class="text-end">
                <a href="{% url 'mailings:mailing_update' mailing.pk %}" class="btn btn-sm btn-primary">‚úèÔ∏è</a>
                <a href="{% url 'mailings:mailing_delete' mailing.pk %}" class="btn btn-sm btn-danger">üóëÔ∏è</a>

                <form action="{% url 'mailings:mailing_action' mailing.pk 'start' %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-success">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                </form>

                <form action="{% url 'mailings:mailing_action' mailing.pk 'stop' %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-warning">‚è∏Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                </form>

                <form action="{% url 'mailings:mailing_action' mailing.pk 'send' %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-info text-white">‚ö° –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–µ–π—á–∞—Å</button>
                </form>
            </td>

        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info">–ü–æ–∫–∞ –Ω–µ—Ç —Ä–∞—Å—Å—ã–ª–æ–∫.</div>
    {% endif %}
</div>
{% endblock %}
